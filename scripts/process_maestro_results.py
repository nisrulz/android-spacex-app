import xml.etree.ElementTree as ET

# Load and parse the JUnit XML file generated by Maestro
file_name = "report.xml"
output_file = "test_results.txt"

try:
    tree = ET.parse(file_name)
    root = tree.getroot()

    # Generate bullet points for test results
    result_output = ""
    for testcase in root.findall(".//testcase"):
        test_name = testcase.get("name", "Unnamed Test")
        status = testcase.get("status", "UNKNOWN").lower()
        duration = testcase.get("time", "0s")
        emoji = "✅" if status == "success" else "❌" if status == "failed" else "⚠️"
        result_output += f"- **{test_name}**: {emoji} {status.capitalize()}, Duration: {duration}s\n"

    # Write results to a file
    with open(output_file, "w") as file:
        file.write(result_output)

except FileNotFoundError:
    print(f"File '{file_name}' not found. Please ensure it exists and the path is correct.")
except ET.ParseError:
    print(f"Unable to parse the XML file. Please ensure the file is properly formatted.")
